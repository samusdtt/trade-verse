{% extends 'base.html' %}
{% block content %}
<h1 class="h4 mb-3">Edit Post</h1>
<form method="post" enctype="multipart/form-data">
	<div class="mb-3">
		<label class="form-label">Title</label>
		<input name="title" class="form-control" value="{{ post.title }}" required>
	</div>
	<div class="mb-3">
		<label class="form-label">Category</label>
		<select name="category_id" class="form-select" required>
			{% for c in categories %}
			<option value="{{ c.id }}" {% if post.category_id==c.id %}selected{% endif %}>{{ c.name }}</option>
			{% endfor %}
		</select>
	</div>
	<div class="mb-3">
		<label class="form-label">Excerpt (optional)</label>
		<input name="excerpt" class="form-control" maxlength="300" value="{{ post.excerpt or '' }}">
	</div>
	<div class="mb-3">
		<label class="form-label">Content</label>
		<textarea name="content" class="form-control" rows="10" required>{{ post.content }}</textarea>
	</div>
	<div class="row g-3">
		<div class="col-md-6">
			<label class="form-label">Thumbnail (JPG/PNG/WEBP)</label>
			<input type="file" name="thumbnail" accept="image/*" class="form-control">
			{% if post.thumbnail_path %}
			<small class="text-muted">Current: <img src="{{ url_for('static', filename=post.thumbnail_path) }}" alt="thumb" class="img-thumbnail mt-2" style="max-height:80px"></small>
			{% endif %}
		</div>
		<div class="col-md-6">
			<label class="form-label">Attach PDF (optional)</label>
			<input type="file" name="pdf" accept="application/pdf" class="form-control">
			{% if post.pdf_path %}
			<small class="d-block mt-2"><a href="{{ url_for('static', filename=post.pdf_path) }}" target="_blank">View current PDF</a></small>
			{% endif %}
		</div>
	</div>
	<div class="mt-3">
		<button class="btn btn-primary">Save</button>
	</div>
</form>
{% endblock %}