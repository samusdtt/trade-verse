{% extends "base.html" %}

{% block title %}Post Templates - {{ config.APP_NAME }}{% endblock %}

{% block content %}
<div class="container py-4">
	<div class="d-flex justify-content-between align-items-center mb-4">
		<h2>Post Templates</h2>
		<a href="{{ url_for('posts.new_template') }}" class="btn btn-primary">
			<i class="bi bi-plus-circle"></i> Create Template
		</a>
	</div>

	{% if templates %}
	<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
		{% for template in templates %}
		<div class="col">
			<div class="card h-100">
				<div class="card-body">
					<div class="d-flex justify-content-between align-items-start mb-2">
						<h5 class="card-title">{{ template.name }}</h5>
						{% if template.is_public %}
						<span class="badge bg-success">Public</span>
						{% else %}
						<span class="badge bg-secondary">Private</span>
						{% endif %}
					</div>
					
					{% if template.description %}
					<p class="card-text text-muted">{{ template.description }}</p>
					{% endif %}
					
					{% if template.title_template %}
					<div class="mb-2">
						<small class="text-muted">Title:</small>
						<div class="fw-bold">{{ template.title_template[:50] }}{% if template.title_template|length > 50 %}...{% endif %}</div>
					</div>
					{% endif %}
					
					{% if template.category %}
					<div class="mb-2">
						<small class="text-muted">Category:</small>
						<span class="badge bg-light text-dark">{{ template.category.name }}</span>
					</div>
					{% endif %}
					
					<div class="text-muted small mb-3">
						Created {{ template.created_at.strftime('%b %d, %Y') }}
					</div>
				</div>
				<div class="card-footer bg-transparent">
					<a href="{{ url_for('posts.use_template', template_id=template.id) }}" class="btn btn-primary btn-sm">
						<i class="bi bi-play-circle"></i> Use Template
					</a>
					{% if template.created_by == current_user.id %}
					<a href="#" class="btn btn-outline-secondary btn-sm">
						<i class="bi bi-pencil"></i> Edit
					</a>
					{% endif %}
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
	{% else %}
	<div class="text-center py-5">
		<i class="bi bi-file-earmark-text display-1 text-muted"></i>
		<h4 class="mt-3">No Templates Yet</h4>
		<p class="text-muted">Create your first template to speed up your post creation process.</p>
		<a href="{{ url_for('posts.new_template') }}" class="btn btn-primary">
			<i class="bi bi-plus-circle"></i> Create Your First Template
		</a>
	</div>
	{% endif %}
</div>
{% endblock %}