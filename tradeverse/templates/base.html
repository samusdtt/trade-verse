<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TradeVerse</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
	<link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
</head>
<body>
	<nav class="navbar navbar-expand-lg bg-white border-bottom py-2 sticky-top">
		<div class="container">
			<a class="navbar-brand d-flex align-items-center" href="{{ url_for('main.index') }}">
				<span class="brand-logo me-2">ðŸœš</span>
				<span class="fw-semibold">TradeVerse</span>
			</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbars" aria-controls="navbars" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbars">
				<ul class="navbar-nav me-auto">
					<li class="nav-item"><a class="nav-link" href="{{ url_for('main.index') }}">Home</a></li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" href="#" id="categoriesDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Categories</a>
						<ul class="dropdown-menu">
							{% for cat in (categories if categories is defined else []) %}
							<li><a class="dropdown-item" href="{{ url_for('main.index', category=cat.name) }}">{{ cat.name }}</a></li>
							{% endfor %}
							{% if categories is not defined %}
							<li><a class="dropdown-item" href="{{ url_for('main.index', category='Backtest') }}">Backtest</a></li>
							<li><a class="dropdown-item" href="{{ url_for('main.index', category='Journal') }}">Journal</a></li>
							<li><a class="dropdown-item" href="{{ url_for('main.index', category='Strategy') }}">Strategy</a></li>
							<li><a class="dropdown-item" href="{{ url_for('main.index', category='Psychology') }}">Psychology</a></li>
							<li><a class="dropdown-item" href="{{ url_for('main.index', category='Education') }}">Education</a></li>
							{% endif %}
						</ul>
					</li>
					<li class="nav-item"><a class="nav-link" href="{{ url_for('main.about') }}">About</a></li>
					<li class="nav-item"><a class="nav-link" href="{{ url_for('main.contact') }}">Contact</a></li>
				</ul>
				<ul class="navbar-nav ms-auto">
					{% if current_user.is_authenticated %}
					<li class="nav-item me-1"><a class="btn btn-sm btn-primary-soft" href="{{ url_for('posts.new_post') }}">New Post</a></li>
					<li class="nav-item me-1"><a class="btn btn-sm btn-outline-secondary" href="{{ url_for('posts.templates') }}">Templates</a></li>
					<li class="nav-item me-1"><a class="btn btn-sm btn-outline-secondary" href="{{ url_for('auth.dashboard') }}">Dashboard</a></li>
					<li class="nav-item me-1"><a class="btn btn-sm btn-outline-secondary" href="{{ url_for('auth.profile') }}">Profile</a></li>
					<li class="nav-item"><a class="btn btn-sm btn-outline-danger" href="{{ url_for('auth.logout') }}">Logout</a></li>
					{% else %}
					<li class="nav-item me-1"><a class="btn btn-sm btn-outline-primary" href="{{ url_for('auth.login') }}">Login</a></li>
					<li class="nav-item"><a class="btn btn-sm btn-primary" href="{{ url_for('auth.signup') }}">Signup</a></li>
					{% endif %}
				</ul>
			</div>
		</div>
	</nav>

	<main class="container-lg py-4">
		{% with messages = get_flashed_messages(with_categories=true) %}
			{% if messages %}
				<div class="mb-3">
					{% for category, message in messages %}
					<div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
						{{ message }}
						<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
					</div>
					{% endfor %}
				</div>
			{% endif %}
		{% endwith %}

		{% block content %}{% endblock %}
	</main>

	<footer class="border-top py-4 text-center text-muted small">
		<div class="container">
			<div class="mb-1 fw-semibold">TradeVerse</div>
			<div>Â© {{ 2025 }} All rights reserved.</div>
		</div>
	</footer>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	
	<!-- Dark Mode Toggle Button -->
	<button class="theme-toggle" onclick="toggleTheme()" id="themeToggle" title="Toggle Dark Mode">
		<i class="bi bi-moon-fill" id="themeIcon"></i>
	</button>
	
	<script>
	// Dark mode functionality
	function toggleTheme() {
		const html = document.documentElement;
		const themeIcon = document.getElementById('themeIcon');
		const currentTheme = html.getAttribute('data-theme');
		
		if (currentTheme === 'dark') {
			html.removeAttribute('data-theme');
			themeIcon.className = 'bi bi-moon-fill';
			localStorage.setItem('theme', 'light');
		} else {
			html.setAttribute('data-theme', 'dark');
			themeIcon.className = 'bi bi-sun-fill';
			localStorage.setItem('theme', 'dark');
		}
	}
	
	// Load saved theme
	document.addEventListener('DOMContentLoaded', function() {
		const savedTheme = localStorage.getItem('theme');
		const themeIcon = document.getElementById('themeIcon');
		
		if (savedTheme === 'dark') {
			document.documentElement.setAttribute('data-theme', 'dark');
			themeIcon.className = 'bi bi-sun-fill';
		}
	});
	</script>
</body>
</html>